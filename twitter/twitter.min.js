(function(e){var g=[],b,d=0,l,h=location.host.split(".").reverse(),m=h[1]+"."+h[0];e.fn.twitter=function(f){b=e.extend({},{screen_name:"huntinggirled",default_count:1,page_count:5,read_count:50,interval:1E3,reload:6E5},f);b.default_count>b.page_count&&(b.page_count=b.default_count);b.page_count>b.read_count&&(b.read_count=b.page_count);f=e(this);f.after('<div id="more_tweet" />');f.getTimeline()};e.fn.getTimeline=function(){var f={printTweet:function(a,c){var b={stripSlashes:function(a){return(a+
"").replace(/\0/g,"0").replace(/\\([\\'"])/g,"$1")},replaceLink:function(a){var c,b=a.match(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w-.\/?%&=~#]*)?/ig);if(b)for(var d=0;d<b.length;++d)c='<a href="'+b[d]+'" target="_blank">'+b[d]+"</a>",a=a.replace(b[d],c);a=a.replace(/[#\uff03]([^\b\s]+)/gi,function(a,b){return'<a href="http://twitter.com/search?q=%23'+encodeURI(b)+'" target="_blank">#'+b+"</a>"});return a=a.replace(/[@\uff20]([^\b\s]+)/gi,function(a,b){return'<a href="http://twitter.com/#!/'+encodeURI(b)+
'" target="_blank">@'+b+"</a>"})},relativeTime:function(a){return f.relativeTime(b.getDatetime(a))},getDatetime:function(a){a=a.split(" ");return Date.parse(a[1]+" "+a[2]+", "+a[5]+" "+a[3])}};if(null==c||null==c.user)return!1;var d=c.id_str,g=null!=c.user.screen_name?c.user.screen_name:"screen_name",h=null!=c.user.name?c.user.name:"name",k=null!=c.user.profile_image_url?b.stripSlashes(c.user.profile_image_url):"http://"+m+"/js/twitter/noimg.png",l=b.relativeTime(c.created_at),n=b.replaceLink(c.text),
p=b.getDatetime(c.created_at);null!=c.retweeted_status&&(g=c.retweeted_status.user.screen_name,h=c.retweeted_status.user.name,k=null!=c.retweeted_status.user.profile_image_url?b.stripSlashes(c.retweeted_status.user.profile_image_url):"http://"+m+"/js/twitter/noimg.png",l=b.relativeTime(c.retweeted_status.created_at),n=b.replaceLink(c.retweeted_status.text),p=b.getDatetime(c.retweeted_status.created_at));a.append('<div class="one_tweet" style="clear:both;"><a href="http://twitter.com/#!/'+g+'" target="_blank" title="@'+
g+'">'+h+'</a><br /><a href="http://twitter.com/#!/'+g+'" target="_blank" title="@'+g+'"><img src="'+k+'" alt="'+h+'" class="widget-img-thumb" /></a>'+n+' <a href="http://twitter.com/huntinggirled/status/'+d+'" target="_blank" class="ctime" data-datetime="'+p+'">'+l+'</a><br /><div class="reply" style="text-align:right;opacity:0.2;"><a href="http://twitter.com/intent/tweet?in_reply_to='+d+'" target="_blank">\u8fd4\u4fe1</a> <a href="http://twitter.com/intent/retweet?tweet_id='+d+'" target="_blank">\u30ea\u30c4\u30a4\u30fc\u30c8</a> <a href="http://twitter.com/intent/favorite?tweet_id='+
d+'" target="_blank">\u304a\u6c17\u306b\u5165\u308a</a></div></div>');a.children(".one_tweet:last").hover(function(){e(this).children(".reply").fadeTo("normal",1)},function(){e(this).children(".reply").fadeTo("normal",0.2)})},relativeTime:function(a){a/=1E3;var b=(new Date).getTime()/1E3;a=parseInt(b-a);a+=60*(new Date).getTimezoneOffset();return 60>a?parseInt(a).toString()+"\u79d2\u524d":3600>a?parseInt(a/60).toString()+"\u5206\u524d":86400>a?parseInt(a/3600).toString()+"\u6642\u9593\u524d":parseInt(a/
86400).toString()+"\u65e5\u524d"},elapsedTime:function(a){return a.find(".ctime").each(function(){var a=e(this).html(),b=f.relativeTime(e(this).data("datetime"));a!=b&&e(this).css("opacity",0).html(b).fadeTo("normal",1)})},shiftItems:function(a){a.append('<div class="tweet" style="opacity:0.0;" />');a=a.children(".tweet:last");a.fadeTo("normal",1);for(var c=0;c<b.page_count&&!(f.printTweet(a,g.shift()),0>=g.length);c++);f.elapsedTime(k);e("#more_tweet").empty().append('<div style="text-align:right;"><a href="" onmouseover="$(\'#twitter\').getTimeline();return false;">[\u3055\u3089\u306b\u8aad\u307f\u8fbc\u3080]</a></div>')},
eachThis:function(a){e("#more_tweet").empty().append('<div style="text-align:right;"><img src="http://'+m+'/indi.gif" alt="\u8aad\u307f\u8fbc\u307f\u4e2d..." width="10" height="10" /> \u8aad\u307f\u8fbc\u307f\u4e2d...</div>');if(1<=d&&g.length>=b.page_count)f.shiftItems(a);else{var c={screen_name:b.screen_name,count:0==d?b.default_count:b.read_count,page:0==d?++d:d++,include_rts:!0};e.ajax({url:"http://"+m+"/js/twitter/twittergw.php",data:c,dataType:"jsonp",callback:"twitterCallback",timeout:5E3}).done(function(c,
e){if(0==d-1||1==d-1)g=[];g=g.concat(c);1==d-1&&g.splice(0,b.default_count);0==d-1&&a.empty();f.shiftItems(a)}).fail(function(b,c,d){f.elapsedTime(a);e("#more_tweet").empty()}).always(function(a,b){})}}},k=e(this);f.eachThis(k);var h=(new Date).getTime();null!=l&&clearInterval(l);l=setInterval(function(){h+b.reload<(new Date).getTime()&&(d=0,f.eachThis(k),h=(new Date).getTime())},b.interval);return k}})(jQuery);