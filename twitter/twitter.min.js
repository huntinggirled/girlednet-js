(function(d){var f=[],a,c=0,l,h=location.host.split(".").reverse(),m=h[1]+"."+h[0];d.fn.twitter=function(e){a=d.extend({},{screen_name:"huntinggirled",default_count:1,page_count:5,read_count:50,interval:1E3,reload:6E5},e);a.default_count>a.page_count&&(a.page_count=a.default_count);a.page_count>a.read_count&&(a.read_count=a.page_count);e=d(this);e.after('<div id="more_tweet" />');e.getTimeline()};d.fn.getTimeline=function(){var e={printTweet:function(g,b){var a={stripSlashes:function(b){return(b+
"").replace(/\0/g,"0").replace(/\\([\\'"])/g,"$1")},replaceLink:function(b,a){for(var g,c=b.match(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w-.\/?%&=~#]*)?/ig),d=0;c&&d<c.length;++d){g='<a href="'+c[d]+'" target="_blank">'+c[d]+"</a>";for(var e=0;a&&e<a.length;++e)c[d]==a[e].url&&(g='<a href="'+c[d]+'" target="_blank" title="'+a[e].expanded_url+'">'+a[e].display_url+"</a>");b=b.replace(c[d],g)}b=b.replace(/[#\uff03]([^\b\s]+)/gi,function(b,a){return'<a href="https://twitter.com/search?q=%23'+encodeURI(a)+
'" target="_blank">#'+a+"</a>"});return b=b.replace(/[@\uff20]([^\b\s]+)/gi,function(b,a){return'<a href="https://twitter.com/#!/'+encodeURI(a)+'" target="_blank">@'+a+"</a>"})},relativeTime:function(b){return e.relativeTime(a.getDatetime(b))},getDatetime:function(b){b=b.split(" ");return Date.parse(b[1]+" "+b[2]+", "+b[5]+" "+b[3])}};if(null==b||null==b.user)return!1;var c=b.id_str,f=null!=b.user.screen_name?b.user.screen_name:"screen_name",h=null!=b.user.name?b.user.name:"name",k=null!=b.user.profile_image_url_https?
a.stripSlashes(b.user.profile_image_url_https):"https://"+m+"/js/twitter/noimg.png",l=a.relativeTime(b.created_at),n=a.replaceLink(b.text,b.entities.urls),p=a.getDatetime(b.created_at);null!=b.retweeted_status&&(f=b.retweeted_status.user.screen_name,h=b.retweeted_status.user.name,k=null!=b.retweeted_status.user.profile_image_url_https?a.stripSlashes(b.retweeted_status.user.profile_image_url_https):"https://"+m+"/js/twitter/noimg.png",l=a.relativeTime(b.retweeted_status.created_at),n=a.replaceLink(b.retweeted_status.text,
b.entities.urls),p=a.getDatetime(b.retweeted_status.created_at));g.append('<div class="one_tweet" style="clear:both;"><a href="https://twitter.com/#!/'+f+'" target="_blank" title="@'+f+'">'+h+'</a><br /><a href="https://twitter.com/#!/'+f+'" target="_blank" title="@'+f+'"><img src="'+k+'" alt="'+h+'" class="widget-img-thumb" /></a>'+n+' <a href="https://twitter.com/huntinggirled/status/'+c+'" target="_blank" class="ctime" data-datetime="'+p+'">'+l+'</a><br /><div class="reply" style="text-align:right;opacity:0.2;"><a href="https://twitter.com/intent/tweet?in_reply_to='+
c+'" target="_blank">\u8fd4\u4fe1</a> <a href="https://twitter.com/intent/retweet?tweet_id='+c+'" target="_blank">\u30ea\u30c4\u30a4\u30fc\u30c8</a> <a href="https://twitter.com/intent/favorite?tweet_id='+c+'" target="_blank">\u304a\u6c17\u306b\u5165\u308a</a></div></div>');g.children(".one_tweet:last").hover(function(){d(this).children(".reply").fadeTo("normal",1)},function(){d(this).children(".reply").fadeTo("normal",.2)})},relativeTime:function(a){a/=1E3;var b=(new Date).getTime()/1E3;a=parseInt(b-
a);a+=60*(new Date).getTimezoneOffset();return 60>a?parseInt(a).toString()+"\u79d2\u524d":3600>a?parseInt(a/60).toString()+"\u5206\u524d":86400>a?parseInt(a/3600).toString()+"\u6642\u9593\u524d":parseInt(a/86400).toString()+"\u65e5\u524d"},elapsedTime:function(a){return a.find(".ctime").each(function(){var a=d(this).html(),c=e.relativeTime(d(this).data("datetime"));a!=c&&d(this).css("opacity",0).html(c).fadeTo("normal",1)})},shiftItems:function(c){c.append('<div class="tweet" style="opacity:0.0;" />');
c=c.children(".tweet:last");c.fadeTo("normal",1);for(var b=0;b<a.page_count&&!(e.printTweet(c,f.shift()),0>=f.length);b++);e.elapsedTime(k);d("#more_tweet").empty().append('<div style="text-align:right;"><a href="" onmouseover="$(\'#twitter\').getTimeline();return false;">[\u3055\u3089\u306b\u8aad\u307f\u8fbc\u3080]</a></div>')},eachThis:function(g){d("#more_tweet").empty().append('<div style="text-align:right;"><img src="https://'+m+'/js/twitter/indi.gif" alt="\u8aad\u307f\u8fbc\u307f\u4e2d..." width="10" height="10" /> \u8aad\u307f\u8fbc\u307f\u4e2d...</div>');
if(1<=c&&f.length>=a.page_count)e.shiftItems(g);else{var b={screen_name:a.screen_name,count:0==c?a.default_count:a.read_count,page:0==c?++c:c++,include_rts:!0};d.ajax({url:"https://"+m+"/js/twitter/twittergw.php",data:b,dataType:"jsonp",callback:"twitterCallback",timeout:5E3}).done(function(b,d){if(0==c-1||1==c-1)f=[];f=f.concat(b);1==c-1&&f.splice(0,a.default_count);0==c-1&&g.empty();e.shiftItems(g)}).fail(function(a,b,c){console.log("NG:"+b.status);e.elapsedTime(g);d("#more_tweet").empty()}).always(function(a,
b){})}}},k=d(this);e.eachThis(k);var h=(new Date).getTime();null!=l&&clearInterval(l);l=setInterval(function(){h+a.reload<(new Date).getTime()&&(c=0,e.eachThis(k),h=(new Date).getTime())},a.interval);return k}})(jQuery);
